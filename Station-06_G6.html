<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Schnitzeljagd ‚Äì Station 6</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#020617;
  color:#e5e7eb;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

/* CARD */
.card{
  background:#0f172a;
  padding:24px;
  border-radius:16px;
  width:360px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
}

h1{
  text-align:center;
  color:#60a5fa;
  margin-top:0;
}

/* SECTION */
.section{
  margin-bottom:18px;
}

/* INPUTFELDER ‚Äì sauber zentriert, kein √úberlaufen */
.section input{
  width:100%;
  box-sizing:border-box;
  padding:12px;
  border-radius:10px;
  border:1px solid #334155;
  background:#020617;
  color:#e5e7eb;
  font-size:1rem;
}

  
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#2563eb;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.hilfe{
  margin-top:10px;
  background:#475569;
}

.hidden{display:none;}

/* TIMER */
#timer{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:6px;
  margin-bottom:16px;
  color:#a5f3fc;
  font-weight:bold;
}

/* HILFEBOX */
.hilfeBox{
  margin-top:18px;
  padding:16px;
  border-radius:14px;
  background:rgba(250,204,21,0.08);
  border:1px solid rgba(250,204,21,0.35);
  text-align:center;
}
.hilfeBox img{
  max-width:140px;
  margin:12px auto;
  display:block;
}
.hilfeBox .answers{
  margin-top:10px;
  line-height:1.6;
}
.hilfeBox .hint{
  margin-top:10px;
  font-size:0.85rem;
  color:#fde68a;
}

/* ERFOLG */
.erfolgBox{
  text-align:center;
}
.checkIcon{
  width:48px;
  height:48px;
  margin:0 auto 12px;
  border-radius:10px;
  background:#22c55e;
  color:#fff;
  font-size:28px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.erfolgText{
  font-size:1.4rem;
  font-weight:bold;
  margin-bottom:16px;
}
.raetselBox{
  padding:16px;
  border-radius:14px;
  background:rgba(34,197,94,0.12);
  border:1px solid rgba(34,197,94,0.45);
  color:#bbf7d0;
  line-height:1.6;
}

  
.buchstabenBox.feuer{
  background:rgba(239,68,68,0.12);
  border:2px solid rgba(239,68,68,0.6);
}

.buchstabenBox.feuer .buchstabe{
  color:#fecaca;
}
  .buchstabenBox{
  margin-top:20px;
  padding:16px;
  border-radius:14px;
  text-align:center;
}

.buchstabenTitel{
  font-size:1.1rem;
  font-weight:bold;
  margin-bottom:8px;
}

.buchstabe{
  font-size:3.5rem;
  font-weight:bold;
  letter-spacing:4px;
}

</style>
</head>

<body>

<div class="card">

<!-- HEADER -->
<div id="header">
  <h1>üìç Station 6</h1>
  <div id="timer">‚è±Ô∏è Zeit: 0 s</div>
</div>


<!-- FORMULAR -->
<form
  action="https://docs.google.com/forms/d/e/1FAIpQLSf2c7-3JTvk9BarK9MBxpo73ykdESEy84IV-Yo7OxPOvg6zOw/formResponse"
  method="POST"
  target="hidden_iframe"
  onsubmit="return auswerten();">

  <!-- feste Werte -->
  <input type="hidden" name="entry.1841279378" value="1"> <!--Gruppe-->
  <input type="hidden" name="entry.1611288883" value="6"> <!--Station-->
  <input type="hidden" name="entry.476999913" id="hauptpunkte" value="0">
  <input type="hidden" name="entry.1855196268" id="bonuspunkte" value="0">
  <input type="hidden" name="entry.1051828811" id="zeit">

  <div class="section">
  <strong>üß© Hauptfrage</strong><br><br>
  Wie lange ist ein B-Schlauch + ein C-Schlauch?<br><br>

  <input
    type="text"
    id="hauptantwort"
    name="entry.1865983702"
    placeholder="Antwort eingeben"
    required>
</div>

<div class="section">
  <strong>‚≠ê Bonusfrage </strong><br><br>
  
  Bevor man l√∂scht, bevor man rennt,<br>
  beginnt es jung, wie jeder kennt.<br><br>
  Das Einstiegsalter ist bekannt ‚Äì<br>
  nenn die Zahl, die hier entstand.<br><br>

  <input
    type="text"
    id="bonusantwort"
    name="entry.1439971772"
    placeholder="Antwort eingeben">
</div>

   <div id="gpsStatus" style="margin:10px 0; font-size:0.9rem; color:#fde68a;">
üì° Standort wird gepr√ºft ‚Ä¶
</div>

  <button type="submit">Antworten absenden</button>


</form>



<!-- ERFOLG -->
<div id="erfolg" class="hidden erfolgBox">
  <div class="checkIcon">‚úî</div>
  <div class="erfolgText">Antwort gesendet!</div>

  <div class="raetselBox">
     <strong>üèÅ Schnitzeljagd beendet</strong><br><br>
    
Gl√ºckwunsch!<br><br>
Ihr habt alle Stationen gemeistert, R√§tsel gel√∂st und euch Schritt f√ºr Schritt bis zum Ziel vorgearbeitet.<br>
Mit Teamgeist, K√∂pfchen und Ausdauer habt ihr gezeigt, was in euch steckt.<br><br>

Egal ob Denken, Suchen oder Laufen ‚Äì ihr habt alles gegeben.<br>
Jetzt ist Zeit, stolz auf euch zu sein und den gemeinsamen Erfolg zu feiern.<br><br>

Vielen Dank f√ºrs Mitmachen ‚Äì gut gemacht! üéâ
</div>

  <div class="buchstabenBox feuer">
  <div class="buchstabenTitel">üîê Euer L√∂sungsbuchstabe</div>
  <div class="buchstabe">R</div>
  </div>
  
</div>

<iframe name="hidden_iframe" style="display:none;"></iframe>

</div>

<script>
  // KONFIGURATION
const Zahl = "35"; // ‚Üê HIER sp√§ter anpassen
const HAUPTPUNKTE_RICHTIG = 10;
const BONUSWORT = "10";
const BONUSPUNKTE_RICHTIG = 10;

const start = Date.now();

    // ZIEL-KOORDINATEN (HIER ANPASSEN!)
const ZIEL_LAT = 50.450514;  
const ZIEL_LON = 9.614289;
const TOLERANZ_METER = 30;

let gpsOK = false;

setInterval(()=>{
  document.getElementById("timer").innerText =
    "‚è±Ô∏è Zeit: " + Math.floor((Date.now()-start)/1000) + " s";
},1000);

  navigator.geolocation.getCurrentPosition(
  pos => {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;

    const dist = berechneDistanz(lat, lon, ZIEL_LAT, ZIEL_LON);

    if (dist <= TOLERANZ_METER) {
      gpsOK = true;
      document.getElementById("gpsStatus").innerText =
        "‚úÖ Du bist am richtigen Standort";
    } else {
      gpsOK = false;
      document.getElementById("gpsStatus").innerText =
        "üìç Du bist noch nicht am richtigen Standort";
    }
  },
  err => {
    document.getElementById("gpsStatus").innerText =
      "üì° Bitte Standortfreigabe erlauben";
  }
);


  function berechneDistanz(lat1, lon1, lat2, lon2){
  const R = 6371000;
  const dLat = (lat2-lat1) * Math.PI/180;
  const dLon = (lon2-lon1) * Math.PI/180;
  const a =
    Math.sin(dLat/2)**2 +
    Math.cos(lat1*Math.PI/180) *
    Math.cos(lat2*Math.PI/180) *
    Math.sin(dLon/2)**2;
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}

function auswerten(){

 if (!gpsOK) {
  alert("üìç Du bist noch nicht am richtigen Standort.");
  return false;
}  
  // Zeit setzen
  document.getElementById("zeit").value =
    Math.floor((Date.now()-start)/1000);

  /* =====================
     HAUPTFRAGE
     ===================== */
  let hp = 0;
  const hauptAntwort = document.getElementById("hauptantwort").value.trim();

  if (hauptAntwort === Zahl) {
    hp = HAUPTPUNKTE_RICHTIG;
  }
  document.getElementById("hauptpunkte").value = hp;

  /* =====================
     BONUSFRAGE (freiwillig)
     ===================== */
  let bp = 0;
  const bonusAntwort = document.getElementById("bonusantwort").value
    .toLowerCase()
    .trim();

  if (bonusAntwort.includes(BONUSWORT)) {
    bp = BONUSPUNKTE_RICHTIG;
  }
  document.getElementById("bonuspunkte").value = bp;

  /* =====================
     UI umschalten
     ===================== */
  document.querySelector("form").classList.add("hidden");
  document.getElementById("erfolg").classList.remove("hidden");
  document.getElementById("header").classList.add("hidden");

  return true;
}
</script>


</body>
</html>
