<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Schnitzeljagd ‚Äì Station 2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#020617;
  color:#e5e7eb;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

/* CARD */
.card{
  background:#0f172a;
  padding:24px;
  border-radius:16px;
  width:360px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
}

h1{
  text-align:center;
  color:#60a5fa;
  margin-top:0;
}

/* SECTION */
.section{
  margin-bottom:18px;
}

/* INPUTFELDER ‚Äì mittig, gleicher Abstand links/rechts */
.section input{
  width:100%;
  box-sizing:border-box;   /* WICHTIG: verhindert √úberlaufen */
  padding:12px;
  border-radius:10px;
  border:1px solid #334155;
  background:#020617;
  color:#e5e7eb;
  font-size:1rem;
}


/* BUTTON */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#2563eb;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.hilfe{
  margin-top:10px;
  background:#475569;
}

.hidden{display:none;}

/* TIMER */
#timer{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:6px;
  margin-bottom:16px;
  color:#a5f3fc;
  font-weight:bold;
}

/* HILFEBOX */
.hilfeBox{
  margin-bottom:32px;
  margin-top:18px;
  padding:16px;
  border-radius:14px;
  background:rgba(250,204,21,0.08);
  border:1px solid rgba(250,204,21,0.35);
  text-align:center;
}
.hilfeBox img{
  max-width:140px;
  margin:12px auto;
  display:block;
}
.hilfeBox .answers{
  margin-top:10px;
  line-height:1.6;
}
.hilfeBox .hint{
  margin-top:10px;
  font-size:0.85rem;
  color:#fde68a;
}

/* ERFOLG */
.erfolgBox{
  text-align:center;
}
.checkIcon{
  width:48px;
  height:48px;
  margin:0 auto 12px;
  border-radius:10px;
  background:#22c55e;
  color:#fff;
  font-size:28px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.erfolgText{
  font-size:1.4rem;
  font-weight:bold;
  margin-bottom:16px;
}
.raetselBox{
  padding:16px;
  border-radius:14px;
  background:rgba(34,197,94,0.12);
  border:1px solid rgba(34,197,94,0.45);
  color:#bbf7d0;
  line-height:1.6;
}
  
  
  .buchstabenBox{
  margin-top:20px;
  padding:16px;
  border-radius:14px;
  text-align:center;
}

.buchstabenTitel{
  font-size:1.1rem;
  font-weight:bold;
  margin-bottom:8px;
}

.buchstabe{
  font-size:3.5rem;
  font-weight:bold;
  letter-spacing:4px;
}

.buchstabenBox.feuer{
  background:rgba(239,68,68,0.12);
  border:2px solid rgba(239,68,68,0.6);
}

.buchstabenBox.feuer .buchstabe{
  color:#fecaca;
}



</style>

</head>

<body>

<div class="card">

<!-- HEADER -->
<div id="header">
  <h1>üìç Station 2</h1>
  <div id="timer">‚è±Ô∏è Zeit: 0 s</div>
</div>


<!-- FORMULAR -->
<form
  action="https://docs.google.com/forms/d/e/1FAIpQLSf2c7-3JTvk9BarK9MBxpo73ykdESEy84IV-Yo7OxPOvg6zOw/formResponse"
  method="POST"
  target="hidden_iframe"
  onsubmit="return auswerten();">

  <!-- feste Werte -->
  <input type="hidden" name="entry.1841279378" value="1"> <!--Gruppe-->
  <input type="hidden" name="entry.1611288883" value="2"> <!--Station-->
  <input type="hidden" name="entry.476999913" id="hauptpunkte" value="0">
  <input type="hidden" name="entry.1855196268" id="bonuspunkte" value="0">
  <input type="hidden" name="entry.1051828811" id="zeit">

  <div class="section">
    <strong>üß© Hauptfrage</strong><br><br>
    Wie viele Zapfpistolen gibt es insgesamt?<br><br>
    <input
  type="text"
  id="hauptantwort"
  name="entry.1865983702"
  placeholder="Antwort eingeben"
  required>    
  </div>

  <div class="section">
    <strong>‚≠ê Bonusfrage</strong><br><br>
    Welches Gefahrensymbol erkennt ihr?<br><br>
    <input
  type="text"
  id="bonusantwort"
  name="entry.1439971772"
  placeholder="Antwort eingeben">   
  </div>

  <div id="hilfeBox" class="hilfeBox hidden">
    <strong>Hilfe ‚Äì Gefahrensymbol</strong>
    <img src="https://daniel911211.github.io/Bilder/Leicht-Entflammbar.png"
         alt="Gefahrensymbol leicht entz√ºndlich">

    <div class="answers">
      A: Gesundheitssch√§dlich<br>
      B: Leicht entz√ºndlich<br>
      C: Umweltgef√§hrlich
    </div>

    <div class="hint">
      Hinweis: Gib den Buchstaben oder die Bedeutung ein.
    </div>
  </div>

 <div id="gpsStatus" style="margin:10px 0; font-size:0.9rem; color:#fde68a;">
üì° Standort wird gepr√ºft ‚Ä¶
</div>
  
  <button type="submit">Antworten absenden</button>
</form>

<button class="hilfe" onclick="hilfe()">üÜò Hilfe zur Bonusfrage</button>

<!-- ERFOLG -->
<div id="erfolg" class="hidden erfolgBox">
  <div class="checkIcon">‚úî</div>
  <div class="erfolgText">Antwort gesendet!</div>

  <div class="raetselBox">
    ‚úñÔ∏è <strong>R√§tsel zur n√§chsten Station</strong><br><br>
    
Wo g√ºnstig der Einkauf gelingt,<br>
und Blau-Gelb weithin sichtbar blinkt.<br><br>

Bekannt f√ºr Preise, klein und fair,<br>
der Markt am Ort, den fast hier jeder kennt.<br><br>

Daneben steht in kr√§ftigem Gelb,<br>
ein Platz, der Pakete sicher h√§lt.
  </div>
  
<div class="buchstabenBox feuer">
  <div class="buchstabenTitel">üîê Euer L√∂sungsbuchstabe</div>
  <div class="buchstabe">E</div>
  
</div>

<iframe name="hidden_iframe" style="display:none;"></iframe>

</div>

<script>
const start = Date.now();

  // ZIEL-KOORDINATEN (HIER ANPASSEN!)
const ZIEL_LAT = 50.450514;  
const ZIEL_LON = 9.614289;
const TOLERANZ_METER = 30;

let gpsOK = false;
let hilfeGenutzt = false;

setInterval(()=>{
  document.getElementById("timer").innerText =
    "‚è±Ô∏è Zeit: " + Math.floor((Date.now()-start)/1000) + " s";
},1000);

  navigator.geolocation.getCurrentPosition(
  pos => {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;

    const dist = berechneDistanz(lat, lon, ZIEL_LAT, ZIEL_LON);

    if (dist <= TOLERANZ_METER) {
      gpsOK = true;
      document.getElementById("gpsStatus").innerText =
        "‚úÖ Du bist am richtigen Standort";
    } else {
      gpsOK = false;
      document.getElementById("gpsStatus").innerText =
        "üìç Du bist noch nicht am richtigen Standort";
    }
  },
  err => {
    document.getElementById("gpsStatus").innerText =
      "üì° Bitte Standortfreigabe erlauben";
  }
);


  function berechneDistanz(lat1, lon1, lat2, lon2){
  const R = 6371000;
  const dLat = (lat2-lat1) * Math.PI/180;
  const dLon = (lon2-lon1) * Math.PI/180;
  const a =
    Math.sin(dLat/2)**2 +
    Math.cos(lat1*Math.PI/180) *
    Math.cos(lat2*Math.PI/180) *
    Math.sin(dLon/2)**2;
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}

function hilfe(){
  hilfeGenutzt = true;
  document.getElementById("hilfeBox").classList.remove("hidden");
}

function auswerten(){

 if (!gpsOK) {
  alert("üìç Du bist noch nicht am richtigen Standort.");
  return false;
}
  
  document.getElementById("zeit").value =
    Math.floor((Date.now()-start)/1000);

  let hp = 0;
  if(document.getElementById("hauptantwort").value.trim() === "16"){
    hp = 10;
  }
  document.getElementById("hauptpunkte").value = hp;

  let bp = 0;
  const b = document.getElementById("bonusantwort").value.toLowerCase().trim();

  if(!hilfeGenutzt && b.includes("leicht")) bp = 10;
  if(hilfeGenutzt && b === "b") bp = 6;

  document.getElementById("bonuspunkte").value = bp;

  document.querySelector("form").classList.add("hidden");
  document.querySelector(".hilfe").classList.add("hidden");
  document.getElementById("erfolg").classList.remove("hidden");
  document.getElementById("header").classList.add("hidden");

  return true;
}
</script>

</body>
</html>
